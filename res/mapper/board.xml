<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
 <!-- 
 	 사용할 수 있는 기본적인 태그들
 	 <insert> ~~~ </insert>
 	 <update> ~~~ </update>
 	 <delete> ~~~ </delete>
 	 <select> ~~~ </select>
 	 
 	 위 태그에서 사용되는 속성들
 	 1) id : 해당 태그를 호출할 때 namespace 속성과 연결하여 사용하는 쿼리ID값
 	 
 	 2) parameterType : SQL문에 사용할 데이터가 들어있는 객체타입을 지정한다.
 	              (보통 VO클래스, 자바의 기본자료형이름 등이 사용된다.)
 	              (typeAlias로 지정한 별명을 사용할 수 있다)
 	              
 	 3) resultType : select문을 실행한 결과를 담을 객체타입을 지정한다.
 	              (보통 VO클래스, 자바의 기본자료형이름 등이 사용된다.)
 	              (typeAlias로 지정한 별명을 사용할 수 있다)
 	              
 	 4) resultMap : 결과 레코드 컬럼명과 VO객체의 property명이 다를 경우에
 	              적절한 매핑을 위한 정보 제공을 위해 사용한다.             
  -->
	
	<resultMap id="boardMap" type="myboard.VO.BoardVO">
    	<id column="board_no" property="brdNo"/>
    	<result column="board_title" property="brdTitle"/>
    	<result column="board_writer" property="brdWriter"/>
    	<result column="board_date" property="brdDate"/>
    	<result column="board_content" property="brdContent"/>
	</resultMap>
		
	<insert id="brdWrite" parameterType="myboard.VO.BoardVO">
		insert into jdbc_board (board_no, board_title, board_writer, board_date, board_content)
		values (board_seq.nextval, #{brdTitle}, #{brdWriter}, sysdate, #{brdContent})
	</insert>
	
	<select id="showAll" resultMap="boardMap" >
		select * 
		  from jdbc_board 
		  order by 1 desc
	</select>
	
	<select id="search" resultMap="boardMap">
		select *
		  from jdbc_board 
		 <where>
		 	<if test=' brdNo != null and brdNo != "" '>
		 		and board_no = #{brdNo}
		 	</if> 
		 
		 	<if test=' brdTitle != null and brdTitle != "" '>
		 		and board_title = #{brdTitle}
		 	</if> 
		 
		 	<if test=' brdWriter != null and brdWriter != "" '>
		 		and board_writer = #{brdWriter}
		 	</if> 
		 
		 	<if test=' brdDate != null and brdDate != "" '>
		 		and to_char(board_date) = #{brdDate}
		 	</if> 
		 
		 	<if test=' brdContent != null and brdContent != "" '>
		 		and board_content like '%'||#{brdContent}||'%'
		 	</if> 
		 </where>
	</select>

	<update id="update" parameterType="myboard.VO.BoardVO">
		update jdbc_board 
		<set> 
			<if test=' brdTitle != null and brdTitle != "" '>
				board_title = #{brdTitle},
			</if>
			<if test=' brdWriter != null and brdWriter != "" '>
				board_writer = #{brdWriter},
			</if>
			<if test=' brdDate != null and brdDate != "" '>
				board_date = #{brdDate},
			</if>
			<if test=' brdContent != null and brdContent != "" '>
				board_content = #{brdContent},
			</if>
		</set>				
		where board_no = #{brdNo}							
	</update>
	
	<delete id="delete" parameterType="BVO">
		delete from jdbc_board where board_no = #{brdNo}
	</delete>
	
</mapper>